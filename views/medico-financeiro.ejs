<%- include includes/header-medico.ejs %>

<%
	const labels = [], data = []
	for(let i = 0; i < earnings.length; i++) {
		if(moment(earnings[i].createdAt, 'DD/MM/YYYY').format('MM/YYYY') === moment().format('MM/YYYY')) {
			labels.push(earnings[i].createdAt)
			data.push(earnings[i].value)
		}
	}

	for(let i = 0; i < data.length; i++) data[i] = (data[i] / 100).toFixed(2)
	
	let totalConvenio = 0, totalPresencial = 0, totalTelemedicina = 0
	for(let i = 0; i < earnings.length; i++) {
		totalConvenio += earnings[i].value

		if(earnings.type === 'presencial') {
			totalPresencial += earnings[i].value
		} else {
			totalTelemedicina += earnings[i].value
		}
	}

	let totalReceita = 0
  	if(bankStatement.length) {
		for(let i = 0; i < bankStatement.length; i++) {
			totalReceita += bankStatement[i].value
		}
	}
%>

<section class="box__panel medico-financeiro">
	<div class="container">
		<div class="row mosaic">
			<div class="col-md-3">
				<div class="mosaic-item cards">
					<p><strong class="number">0</strong> Pacientes do Dia</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="mosaic-item cards">
					<p><strong class="number">0</strong> Pacientes do Mês</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="mosaic-item cards">
					<p><strong class="number">0</strong> Atendimento</p>
				</div>
			</div>
			<div class="col-md-3">
				<div class="mosaic-item cards">
					<p><strong class="number">0</strong> Faltaram</p>
				</div>
			</div>
			<div class="col-md-12 atendimento-paciente financeiro receita">
					<div class="mosaic-item">
						<div class="row">
							<div class="col-md-3">
							<h2 class="title-mosaic"><strong>Financeiro</strong></h2>
							</div>
							<div class="col-md-8">
									<ul class="nav nav-pills mb-4 d-flex justify-content-between" id="pills-tab" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="pills-receita-tab" data-toggle="pill" href="#pills-receita" role="tab" aria-controls="pills-receita" aria-selected="true">RECEITA</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="pills-despesas-tab" data-toggle="pill" href="#pills-despesas" role="tab" aria-controls="pills-despesas" aria-selected="false">Despesas</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="pills-a-pagar-tab" data-toggle="pill" href="#pills-a-pagar" role="tab" aria-controls="pills-a-pagar" aria-selected="false">À PAGAR</a>
                      </li>
                    </ul>
							</div>
						</div>
						<div class="tab-content" id="pills-tabContent">
							<div class="row d-flex align-items-center">
								<div class="nome item">
									<p>Nome</p>
								</div>
								<div class="categoria item">
									<p>Categoria</p>
								</div>
								<div class="data item">
										<p>Data</p>
									</div>
								<div class="value item">
									<p>Valor</p>
								</div>
								<div class="acao item">
									<p>Ação</p>
								</div>
							</div>
							<table class="table table-bordered">
									<thead>
										<tr>
											<th scope="col">Nome</th>
											<th scope="col">Categoria</th>
											<th scope="col">Data</th>
											<th scope="col">Valor</th>
											<th scope="col">Ação</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<th scope="row">Unimed</th>
											<td>Planos</td>
											<td>13/02/19</td>
											<td >R$ 499,00</td>
											<td class="ver-mais"><p>Ver mais</p></td>
										</tr>
										<tr>
											<th scope="row">Unimed</th>
											<td>Planos</td>
											<td>13/02/19</td>
											<td >R$ 499,00</td>
											<td class="ver-mais"><p>Ver mais</p></td>
										</tr>
									</tbody>
								</table>
						</div>

						<div class="row paciente-item">
							<div class="col-md-12 d-flex justify-content-between">
								<div class=" col-md-4 info-paciente d-flex">
									<img src="/views/img/foto-paciente.png" alt="Imagem do paciente" class="img-responsive img-paciente">
									<p class="name-paciente">Andre Ribeiro</p>
									<p class="name-convenio">Particular</p>
								</div>
								<div class="horario-paciente">
									<p class="horario-item">08:00 hrs</p>
								</div>
							</div>
						</div>
						<div class="row addAtendimento">
							<a href="#" class="btn btn-gradient" id="addAtendimento">Adicionar um novo atendimento </a>
						</div>
					</div>
				</div>



			<div class="col-md-12">
				<div class="mosaic-item cards">
					<div class="selectresumo">
						<h1 class="tituloresumo">Período</h1>
						<select class="periodoresumo" name="" id="">
							<option value="">Hoje</option>
							<option value="">Esta semana</option>
							<option value="">Este mês</option>
							<option value="">Últimos 30 dias</option>
							<option value="" type="date">Periodo</option>
						</select>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="mosaic-item cards transta">
					<h1 class="tituloresumo">Transações</h1>
					<a class="btn-receitaresumo" id="corbtn"><i class="fas fa-arrow-up"></i> RECEITA</a>
					<a class="btn-despesasresumo" id="corbtn"><i class="fas fa-arrow-down"></i> DESPESA</a>
					<a class="btn btn-transresumo"><i class="fas fa-exchange-alt"></i> TRANSFERÊNCIA</a>
					<div class="saldo">
						<hr>
						<h1 class="tituloresumo">Saldo Geral</h1>
						<p id="colorsalgeral">R$ 0,00</p>
						<hr>
					</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="mosaic-item cards">
					<h1 class="tituloresumo">Receitas x Convênio</h1>

					<canvas id="myDoughnut" width="200" height="200"></canvas>
					<h4><%= ((totalReceita + totalConvenio) / 100).toFixed(2) %><br><span>Total</span></h4>

				</div>
			</div>
			<div class="col-md-4">
				<div class="mosaic-item cards">
					<h1 class="tituloresumo">Receitas x Procedimento</h1>

					<canvas id="receitasDoughnut" width="200" height="200"></canvas>
					<h4><%= ((totalTelemedicina + totalPresencial) / 100).toFixed(2) %><br><span>Total</span></h4>

				</div>
			</div>

			<div class="col-md-12">
				<div class="mosaic-item">
					<h1 class="tituloresumo">Balanço</h1>

					<canvas id="myChart" width="100" height="100"></canvas>

				</div>
			</div>
			<div class="col-md-6">
				<div class="mosaic-item">
					<h1 class="tituloresumo">Receitas pendentes no período</h1>
					<p id="colorsalgeral"><i class="fas fa-arrow-down"></i> R$ 0,00</p>
					<a href="" class="btn btn-gradient">VER MAIS</a>
				</div>
			</div>
			<div class="col-md-6">
				<div class="mosaic-item ">
					<h1 class="tituloresumo">Despesas pendentes no período</h1>
					<p id="colorsalgeral"><i class="fas fa-arrow-up"></i> R$ 0,00</p>
					<a href="" class="btn btn-gradient">VER MAIS</a>
				</div>
			</div>
		</div>
	</div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>


<script>
	//Balanço Fincanceiro
    const labels = '<%= labels %>'
    const data = '<%= data %>'
    function getRandomColor() {
        let letters = '0123456789ABCDEF'
        let color = '#'
        for (let i = 0; i < 6; i++) {
            color += letters[Math.floor(Math.random() * 16)]
        }
        return color
    }
    const backgroundColor = []
	for(let i = 0; i < labels.split(',').length; i++) backgroundColor.push(getRandomColor())
	
	var ctx = document.getElementById('myChart').getContext('2d');
	var myChart = new Chart(ctx, {
		type: 'bar',
		data: { //A Data vai ser do periodo de 30 dias
			labels: labels.split(','),
			datasets: [{
				label: 'Balanço Financeiro',
				data: data.split(','), //Passar os valores de ganhos em cada periodo
				backgroundColor,
				borderColor: backgroundColor,
				borderWidth: 2
			}]
		},
		options: {
			scales: {
				yAxes: [{
					ticks: {
						beginAtZero: true
					}
				}]
			}
		}
	});
</script>

<script type="text/javascript">
	//Receita X Convênio
	var ctx = document.getElementById('myDoughnut').getContext('2d');
	var myChart = new Chart(ctx, {
		type: 'doughnut',
		data: {
			labels: ["Receita", "Convênio"],
			datasets: [{
				backgroundColor: ["#3e95cd", "#8e5ea2"],
				data: [
					('<%= totalReceita %>' / 100).toFixed(2),
					('<%= totalConvenio %>' / 100).toFixed(2)
				]
			}]
		},
	});


	//Telemedicina X Presencial
	var ctx = document.getElementById('receitasDoughnut').getContext('2d');
	var myChart = new Chart(ctx, {
		type: 'doughnut',
		data: {
			labels: ["Telemedicina", "Presencial"],
			datasets: [{
				backgroundColor: ["#e74b64", "#8e5ea2"],
				data: [
					('<%= totalTelemedicina %>' / 100).toFixed(2),
					('<%= totalPresencial %>' / 100).toFixed(2)
				]
			}]
		},
	});
</script>

<section class="box__panel">
	<div class="container">
		<div class="row mosaic">
			<div class="col-md-12">
				<div class="financeiro__box">
					<% if(earnings.length) { %>
					<div class="financeiro__title">
						<h3>Histórico - ganhos (telemedicina)</h3>
						<table class="table table-dashed">
							<thead>
								<tr>
									<th scope="col">PACIENTE</th>
									<th scope="col">DATA</th>
									<th scope="col">CONVENÇÃO MÉDICA</th>
									<th scope="col">VALOR</th>
								</tr>
							</thead>
							<tbody>
								<% for(let i = 0; i < earnings.length; i++) { %>
								<% if(earnings[i].type === 'telemedicina') { %>
								<tr>
									<td><%= earnings[i].patientInfo.patientName %></td>
									<td><%= moment(earnings[i].start).format('L') %></td>
									<td><%= earnings[i].patientInfo.patientAgreement %></td>
									<td>R$ <%= (earnings[i].value / 100).toFixed(2) %></td>
								</tr>
								<% } %>
								<% } %>
							</tbody>
						</table>
					</div>
					<% } %>

					<% if(earnings.length) { %>
					<div class="financeiro__title">
						<h3>Histórico - consultas (presencial)</h3>
						<table class="table table-dashed">
							<thead>
								<tr>
									<th scope="col">PACIENTE</th>
									<th scope="col">DATA</th>
									<th scope="col">CONVENÇÃO MÉDICA</th>
									<th scope="col">LOCAL</th>
									<th scope="col">VALOR</th>
								</tr>
							</thead>
							<tbody>
								<% for(let i = 0; i < earnings.length; i++) { %>
								<% if(earnings[i].type === 'presencial') { %>
								<tr>
									<td><%= earnings[i].patientInfo.patientName %></td>
									<td><%= moment(earnings[i].start).format('L') %></td>
									<td><%= earnings[i].patientInfo.patientAgreement %></td>
									<td><%= earnings[i].locationInfo.address %>, <%= earnings[i].locationInfo.number %>.
										<%= earnings[i].locationInfo.city %>/<%= earnings[i].locationInfo.state %> -
										<%= earnings[i].locationInfo.zipCode %></td>
									<td>R$ <%= (earnings[i].value / 100).toFixed(2) %></td>
								</tr>
								<% } %>
								<% } %>
							</tbody>
						</table>
					</div>
					<% } %>

					<% if(financialPlan.length) { %>
					<div class="financeiro__title">
						<h3>Histórico - planos</h3>
						<table class="table table-dashed">
							<thead>
								<tr>
									<th scope="col">PLANO</th>
									<th scope="col">DATA</th>
									<th scope="col">STATUS</th>
									<th scope="col">TOTAL</th>
								</tr>
							</thead>
							<tbody>
								<% for(let i = 0; i < financialPlan.length; i++) { %>
								<tr>
									<td><%= financialPlan[i].plan %></td>
									<td><%= financialPlan[i].createdAtDay %></td>
									<td><%= financialPlan[i].status %></td>
									<td>R$ <%= financialPlan[i].amount.toFixed(2) %> / mês</td>
								</tr>
								<% } %>
							</tbody>
						</table>
					</div>
					<% } %>

					<% if(financialProduct.length) { %>
					<div class="financeiro__title">
						<h3>Histórico - produtos</h3>
						<table class="table table-dashed">
							<thead>
								<tr>
									<th scope="col">PRODUTO</th>
									<th scope="col">DATA</th>
									<th scope="col">STATUS</th>
									<th scope="col">SUBTOTAL</th>
									<th scope="col">QUANTIDADE</th>
									<th scope="col">TOTAL</th>
								</tr>
							</thead>
							<tbody>
								<% for(let i = 0; i < financialProduct.length; i++) { %>
									<tr>
										<td><%= financialProduct[i].product %></td>
										<td><%= financialProduct[i].createdAtDay %> - <%= financialProduct[i].createdAtMoment %></td>
										<td><%= financialProduct[i].status %></td>
										<td>R$ <%= financialProduct[i].amountPerProduct.toFixed(2) %></td>
										<td><%= financialProduct[i].totalDays %></td>
										<td>R$ <%= financialProduct[i].total.toFixed(2) %></td>
									</tr>
								<% } %>
							</tbody>
						</table>
					</div>
					<% } %>

					<div class="financeiro__title">
						<h3>Extrato</h3>

						<div class="form-filter fin-r">
							<div class="select">
								<i class="sprite-form__filter"></i>
								<select name="" id="" class="select-icon">
									<option value="">Filtrar</option>
									<option value="">Este mês</option>
									<option value="">Descrição</option>
									<option value="">Categoria</option>
									<option value="">Centro de custo</option>
									<option value="">Conta</option>
									<option value="">Convênio</option>
									<option value="">Forma de pagamento</option>
									<option value="">Paciente</option>
									<option value="">Procedimento</option>
									<option value="">Profissional de saúde</option>
									<option value="">Satus</option>
									<option value="">Tipo</option>
								</select>
							</div>
							<a href="#" class="btn btn-pdf"><i class="fas fa-print"></i></a>
							<a href="#transferencia" data-fancybox="tranferencia" class="btn btn-pdf"><i
									class="fas fa-exchange-alt"></i></a>
							<a href="#saidadecaixa" data-fancybox="saidadecaixa" class="btn btn-pdf">Despesas</a>
							<a href="#entradasdecaixa" data-fancybox="entradasdecaixa"
								class="btn btn-excel">Receitas</a>

						</div>

						<div class="cadastro-box">
							<div class="form-cadastro profissional-saude active">
								<table style="border-bottom: dashed 1px; border-bottom-color: #e6e6e6"
									class="table table-dashed">
									<thead>
										<tr>
											<th scope="col">DATA</th>
											<th scope="col">DESCRIÇÃO</th>
											<th scope="col">CATEGORIA</th>
											<th scope="col">VALOR</th>
											<th scope="col">AÇÕES</th>
										</tr>
									</thead>
									<% if(bankStatement.length) { %>
									<% for(let i = 0; i < bankStatement.length; i++) { %>
									<tr>
										<td><%= bankStatement[i].createdAt %></td>
										<td><%= bankStatement[i].description %></td>
										<td><%= bankStatement[i].category %></td>
										<td>R$<%= (bankStatement[i].value / 100).toFixed(2) %></td>
										<td>
											<form id="delete-bankStatement-<%= i %>">
												<input type="hidden" name="bankStatementId"
													value="<%= bankStatement[i]._id %>">
												<button type="submit" class="btn-gradient">EXCLUIR</button>
											</form>
											<script>
												$(document).ready(function () {
													$('#delete-bankStatement-<%= i %>').on('submit', function (e) {
														e.preventDefault()

														$.ajax({
															type: 'DELETE',
															url: '/bankStatement',
															datatype: 'html',
															contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
															data: $('#delete-bankStatement-<%= i %>').serialize(),
															success: function (result) {
																alertify.notify(result, 'success', 5)
																setTimeout(function () {
																	window.location.reload()
																}, 500)
															},
															error: function (xhr, status, error) {
																alertify.notify(JSON.parse(xhr.responseText), 'error', 5)
															},
														})
													})
												})
											</script>
										</td>
										<td><a href="#ver-mais-<%= i %>" data-fancybox="<%= i %>"
												class="btn-gradient">VER MAIS</a></td>

										<div style="width: 70%; " class="modal" id="ver-mais-<%= i %>">
											<div style="width: 100%" class="modal-box">
												<div class="modal-title">
													<h2>Ver mais</h2>
												</div>
												<div class="form">
													<%= bankStatement[i] %>
												</div>
											</div>
										</div>
									</tr>
									<% } %>
									<% } %>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-6">
				<div class="mosaic-item cards">
					<P class="extratoresumop">Resumo do período <span class="extratoresumospan">(01/05/19 -
							31/05/19)</span></P>
					<p class="extratoresumop">Total de transações: <span class="extratoresumospan">0</span></p>
					<hr id="extratoresumohr">
					<p class="extratoresumop">Receitas pendentes: <span class="extratoresumospan">0</span> <span
							class="extratoresumospan">R$ 0,00</span></p>
					<p class="extratoresumop">Despesas pendentes: <span class="extratoresumospan">0-</span> <span
							class="extratoresumospan">R$ 0,00</span></p>
				</div>
			</div>
			<div class="col-md-6">
				<div class="mosaic-item cards">
					<P class="extratoresumop">Total de receitas
						<span class="extratoresumospan">R$ 0,00</span>
					</P>
					<p class="extratoresumop">Total de despesas
						<span class="extratoresumospan"> - R$ 0,00</span>
					</p>
					<hr id="extratoresumohr">
					<p class="extratoresumop">Total do período
						<span class="extratoresumospan">R$ 0,00</span>
					</p>
				</div>
			</div>
		</div>
	</div>
	</div>
</section>

<!-- Modal transferência  -->
<div style="width: 70%; " class="modal" id="transferencia">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Transferência</h2>
		</div>
		<div class="form">
			<form id="transfer-form">
				<input type="hidden" name="type" value="transfer">
				<div class="row">
					<div class="col-md-6">
						<input type="text" name="value" placeholder="Valor">
					</div>
					<div class="col-md-6">
						<input type="date" name="invoiceMaturity" placeholder="Data">
					</div>
					<div class="col-md-12">
						<input type="text" name="description" placeholder="Descrição">
					</div>
					<div class="col-md-6">
						<input type="text" name="origin" placeholder="Origem">
					</div>
					<div class="col-md-6">
						<input type="text" name="destiny" placeholder="Destino">
					</div>
					<div class="col-md-4">
						<input style="margin-top: 30px;" type="submit" class="btn btn-gradient" value="Salvar">
					</div>
				</div>
			</form>
			<script>
				$(document).ready(function () {
					$('#transfer-form').on('submit', function (e) {
						e.preventDefault()

						$.ajax({
							type: 'POST',
							url: '/bankStatement',
							datatype: 'html',
							contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
							data: $('#transfer-form').serialize(),
							success: function (result) {
								alertify.notify(result, 'success', 5)
								setTimeout(function () {
									window.location.reload()
								}, 500)
							},
							error: function (xhr, status, error) {
								alertify.notify(JSON.parse(xhr.responseText), 'error', 5)
							},
						})
					})
				})
			</script>
		</div>
	</div>
</div>
<!-- Modal transferência fim -->

<!--Modal adicionar nova conta  -->
<div style="width: 70%; " class="modal" id="novaconta">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Nova Conta</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<input type="text" name="" placeholder="Nome">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Saldo inicial">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>
<!--Modal adicionar nova conta  fim -->

<!--Modal adicionar nova conta destino  -->
<div style="width: 70%; " class="modal" id="novacontadestino">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Nova Conta Destino</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<input type="text" name="" placeholder="Nome">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Saldo inicial">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>
<!--Modal adicionar nova conta destino  fim -->

<div style="width: 70%; " class="modal" id="saidadecaixa">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Despesas</h2>
		</div>
		<div class="form">
			<form id="expenses-form">
				<input type="hidden" name="type" value="expenses">
				<div class="row">
					<div class="col-md-12">
						<input type="text" name="patientName" placeholder="Paciente">
					</div>
					<div class="col-md-4">
						<input type="text" name="professionalName" placeholder="Profissional">
					</div>
					<div class="col-md-4">
						<input type="text" name="agreement" placeholder="Convênio">
					</div>
					<div class="col-md-4">
						<input type="text" name="procedure" placeholder="Procedimento">
					</div>
					<div class="col-md-4">
						<input type="text" name="value" placeholder="Valor">
					</div>
					<div class="col-md-4">
						<input type="text" name="description" placeholder="Descrição">
					</div>
					<div class="col-md-4">
						<input type="text" name="category" placeholder="Categoria">
					</div>
					<div class="col-md-4">
						<input type="text" name="account" placeholder="Conta">
					</div>
					<div class="col-md-4">
						<div class="select">
							<select name="paymentType" class="select-icon">
								<option selected disabled>Forma de Pagamento</option>
								<option>Dinheiro</option>
								<option>Cartão de Crédito</option>
								<option>Cartão de Débito</option>
								<option>Cheque</option>
								<option>Boleto</option>
								<option>Transferência bancária</option>
							</select>
						</div>
					</div>
					<div class="col-md-4">
						<input type="text" name="costCenter" placeholder="Centro de custo">
					</div>
					<div class="col-md-6">
						<input type="date" name="invoiceMaturity" placeholder="Vencimento">
					</div>
					<div class="col-md-6">
						<input type="date" name="receivedAt" placeholder="Pago">
					</div>

					<div class="col-md-12">
						<p>Parcelas</p>
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentInput" placeholder="Entrada de">
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentNumber" placeholder="Número de Parcelas?">
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentValue" placeholder="Valor das parcelas">
					</div>

					<div class="col-md-12">
						<p>Repetir</p>
					</div>
					<div class="col-md-6">
						<div class="select">
							<select name="recurrence" class="select-icon">
								<option>Mensalmente</option>
								<option>Semanalmente</option>
								<option>Quinzenalmente</option>
								<option>Anualmente</option>
							</select>
						</div>
					</div>
					<div class="col-md-6">
						<input type="text" name="occurrencesTimes" placeholder="Ocorrências de vezes">
					</div>
				</div>
				<div class="col-md-4">
					<input type="submit" class="btn btn-gradient" value="Salvar">
				</div>
			</form>
			<script>
				$(document).ready(function () {
					$('#expenses-form').on('submit', function (e) {
						e.preventDefault()

						$.ajax({
							type: 'POST',
							url: '/bankStatement',
							datatype: 'html',
							contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
							data: $('#expenses-form').serialize(),
							success: function (result) {
								alertify.notify(result, 'success', 5)
								setTimeout(function () {
									window.location.reload()
								}, 500)
							},
							error: function (xhr, status, error) {
								alertify.notify(JSON.parse(xhr.responseText), 'error', 5)
							},
						})
					})
				})
			</script>
		</div>
	</div>
</div>

<!--Modal parcelar  -->
<div style="width: 70%; " class="modal" id="parcelar">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Parcelar</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<input type="text" name="" placeholder="Entrada de">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Número de Parcelas?">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Valor das parcelas">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>
<!--Modal parcelar  fim -->

<!--Modal repetir  -->
<div style="width: 70%; " class="modal" id="repetir">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Repetir</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<div class="select">
							<select name="" id="" class="select-icon">
								<option value="">Mensalmente</option>
								<option value="">Semanalmente</option>
								<option value="">Quinzenalmente</option>
								<option value="">Anualmente</option>
							</select>
						</div>
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Ocorrências de vezes">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>
<!--Modal repetir  fim -->

<div style="width: 70%; " class="modal" id="entradasdecaixa">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Receita</h2>
		</div>
		<div class="form">
			<form id="earnings-form">
				<input type="hidden" name="type" value="earnings">
				<div class="row">
					<div class="col-md-12">
						<input type="text" name="patientName" placeholder="Paciente">
					</div>
					<div class="col-md-4">
						<input type="text" name="professionalName" placeholder="Profissional">
					</div>
					<div class="col-md-4">
						<input type="text" name="agreement" placeholder="Convênio">
					</div>
					<div class="col-md-4">
						<input type="text" name="procedure" placeholder="Procedimento">
					</div>
					<div class="col-md-4">
						<input type="text" name="value" placeholder="Valor">
					</div>
					<div class="col-md-4">
						<input type="text" name="description" placeholder="Descrição">
					</div>
					<div class="col-md-4">
						<input type="text" name="category" placeholder="Categoria">
					</div>
					<div class="col-md-4">
						<input type="text" name="account" placeholder="Conta">
					</div>
					<div class="col-md-4">
						<div class="select">
							<select name="paymentType" class="select-icon">
								<option selected disabled>Forma de Pagamento</option>
								<option>Dinheiro</option>
								<option>Cartão de Crédito</option>
								<option>Cartão de Débito</option>
								<option>Cheque</option>
								<option>Boleto</option>
								<option>Transferência bancária</option>
							</select>
						</div>
					</div>
					<div class="col-md-4">
						<input type="text" name="costCenter" placeholder="Centro de custo">
					</div>
					<div class="col-md-6">
						<input type="date" name="invoiceMaturity" placeholder="Vencimento">
					</div>
					<div class="col-md-6">
						<input type="date" name="receivedAt" placeholder="Pago">
					</div>

					<div class="col-md-12">
						<p>Parcelas</p>
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentInput" placeholder="Entrada de">
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentNumber" placeholder="Número de Parcelas?">
					</div>
					<div class="col-md-4">
						<input type="text" name="installmentValue" placeholder="Valor das parcelas">
					</div>

					<div class="col-md-12">
						<p>Repetir</p>
					</div>
					<div class="col-md-6">
						<div class="select">
							<select name="recurrence" class="select-icon">
								<option>Mensalmente</option>
								<option>Semanalmente</option>
								<option>Quinzenalmente</option>
								<option>Anualmente</option>
							</select>
						</div>
					</div>
					<div class="col-md-6">
						<input type="text" name="occurrencesTimes" placeholder="Ocorrências de vezes">
					</div>
				</div>
				<div class="col-md-4">
					<input type="submit" class="btn btn-gradient" value="Salvar">
				</div>
			</form>
			<script>
				$(document).ready(function () {
					$('#earnings-form').on('submit', function (e) {
						e.preventDefault()

						$.ajax({
							type: 'POST',
							url: '/bankStatement',
							datatype: 'html',
							contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
							data: $('#earnings-form').serialize(),
							success: function (result) {
								alertify.notify(result, 'success', 5)
								setTimeout(function () {
									window.location.reload()
								}, 500)
							},
							error: function (xhr, status, error) {
								alertify.notify(JSON.parse(xhr.responseText), 'error', 5)
							}
						})
					})
				})
			</script>
		</div>
	</div>
</div>

<!--Modal parcelar  -->
<div style="width: 70%; " class="modal" id="recebeitaparcelar">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Parcelar</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<input type="text" name="" placeholder="Entrada de">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Número de Parcelas?">
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Valor das parcelas">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>
<!--Modal parcelar  fim -->

<!--Modal repetir  -->
<div style="width: 70%; " class="modal" id="recebeitarepetir">
	<div style="width: 100%" class="modal-box">
		<div class="modal-title">
			<h2>Repetir</h2>
		</div>
		<div class="form">
			<form action="">
				<div class="row">
					<div class="col-md-6">
						<div class="select">
							<select name="" id="" class="select-icon">
								<option value="">Mensalmente</option>
								<option value="">Semanalmente</option>
								<option value="">Quinzenalmente</option>
								<option value="">Anualmente</option>
							</select>
						</div>
					</div>
					<div class="col-md-6">
						<input type="text" name="" placeholder="Ocorrências de vezes">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-gradient" value="Adicionar">
					</div>
					<div class="col-md-3">
						<input type="submit" class="btn btn-pdf" value="Cancelar">
					</div>
			</form>
		</div>
	</div>
</div>

<%- include includes/footer.ejs %>
</body>

</html>